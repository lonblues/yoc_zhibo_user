{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/pages/demo.vue?c0df","webpack:///./src/App.vue?1092","webpack:///src/App.vue","webpack:///./src/App.vue?7d52","webpack:///./src/App.vue","webpack:///./src/pages/demo.vue?05a0","webpack:///./src/utils/request.js","webpack:///./src/api/demo.js","webpack:///src/pages/demo.vue","webpack:///./src/pages/demo.vue?5dce","webpack:///./src/pages/demo.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","staticRenderFns","components","methods","component","showInfo","on","$event","_v","model","callback","$$v","userId","expression","joinRoom","listRoomUsers","staticClass","newMessages","slot","_l","item","index","computeNum","computeHidden","initChat","_s","showSend","_e","showChat","removeMessage","class","message","sendMessage","messageAll","sendAll","service","axios","baseURL","timeout","listActiveRooms","request","post","function","createRoomToken","room","type","console","log","audioDevice","videoDevice","audioDevices","videoDevices","roomToken","userList","currentUser","lastUser","showToken","userToken","room_list","currentRoom","toUserId","chatMessage","allMessages","mounted","addDeviceToSelect","deviceInfo","forEach","info","kind","updateMessage","subscribeUser","myRoom","subscribe","then","stream","play","remoteContainer","Promise","resolve","res","changeView","stopView","stopMergeStream","sendCustomMessage","array","filter","Vue","use","Router","originalPush","location","catch","err","router","routes","path","Demo","Vuex","store","Store","state","mutations","plugins","createPersistedState","config","productionTip","ElementUI","render","h","App","$mount"],"mappings":"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","file":"js/app.f2603b01.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./demo.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"height\":\"100%\"},attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"app\" style=\"height:100%\">\r\n\r\n      <router-view />\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  components: {\r\n\r\n  },\r\n  data () {\r\n    return {\r\n\r\n    }\r\n  },\r\n  methods: {\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import mod from \"-!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=b3c4ecce&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3c4ecce\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-dialog',{attrs:{\"visible\":_vm.showInfo,\"title\":\"Info\"},on:{\"update:visible\":function($event){_vm.showInfo=$event}}},[_c('p',[_vm._v(\"Please enter your name\")]),_c('el-input',{model:{value:(_vm.userId),callback:function ($$v) {_vm.userId=$$v},expression:\"userId\"}}),_c('div',[_c('el-button',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.joinRoom}},[_vm._v(\"Join Room\")])],1)],1)],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showInfo=true}}},[_vm._v(\"Join Room\")]),_c('el-dropdown',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"trigger\":\"click\",\"placement\":\"bottom-start\"},on:{\"visible-change\":_vm.listRoomUsers}},[_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.newMessages.length,\"hidden\":_vm.newMessages.length==0}},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\" Chat\"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})])],1),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},_vm._l((_vm.userList),function(item,index){return _c('el-dropdown-item',{key:index},[_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.computeNum(item.userId),\"hidden\":_vm.computeHidden(item.userId)}},[_c('div',{staticStyle:{\"width\":\"80px\",\"height\":\"50px\",\"line-height\":\"50px\"},on:{\"click\":function($event){return _vm.initChat(item.userId)}}},[_vm._v(_vm._s(item.userId))])])],1)}),1)],1),(_vm.userId=='admin')?_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showSend=true}}},[_vm._v(\"Post\")]):_vm._e(),_c('el-dialog',{attrs:{\"visible\":_vm.showChat},on:{\"update:visible\":function($event){_vm.showChat=$event},\"close\":_vm.removeMessage}},[_c('div',{staticClass:\"chatBlock\"},_vm._l((_vm.chatMessage),function(item,index){return _c('div',{key:index,staticStyle:{\"height\":\"50px\",\"line-height\":\"50px\",\"margin-top\":\"10px\"}},[_c('div',{class:(item.userId==_vm.userId?'right':'left')},[_c('span',{staticStyle:{\"background\":\"rgba(64,158,255,0.3)\",\"border-radius\":\"20px\",\"padding\":\"10px 16px\"}},[_vm._v(_vm._s(item.data))])])])}),0),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-input',{staticStyle:{\"width\":\"86%\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendMessage}},[_vm._v(\"Send\")])],1)]),_c('div',{staticClass:\"users\"},[_c('p',{staticStyle:{\"color\":\"#606266\"}},[_vm._v(\"Local\")]),_c('div',{staticStyle:{\"width\":\"320px\"},attrs:{\"id\":\"localvideo\"}}),(_vm.userId=='admin')?_c('p',{staticStyle:{\"margin-top\":\"30px\",\"color\":\"#606266\"}},[_vm._v(\"Meeting\")]):_vm._e(),_c('div',{attrs:{\"id\":\"remote\"}})]),_c('el-dialog',{attrs:{\"visible\":_vm.showSend,\"title\":\"Send\"},on:{\"update:visible\":function($event){_vm.showSend=$event}}},[_c('el-input',{model:{value:(_vm.messageAll),callback:function ($$v) {_vm.messageAll=$$v},expression:\"messageAll\"}}),_c('el-button',{on:{\"click\":_vm.sendAll}},[_vm._v(\"Send\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\r\nconst service = axios.create({\r\n  baseURL: './index.php', // api 的 base_url\r\n  timeout: 5000 // request timeout\r\n})\r\nexport default service\r\n","/**\r\n * Created by huzeyin on 2020/5/12.\r\n */\r\nimport request from '../utils/request'\r\n\r\nexport function listActiveRooms () {\r\n  return request.post('./index.php', {\r\n    function: 'listActiveRooms'\r\n  })\r\n}\r\n\r\nexport function createRoomToken (room, userId, type) {\r\n  return request.post('./index.php', {\r\n    function: 'createRoomToken',\r\n    room,\r\n    userId,\r\n    type\r\n  })\r\n}\r\n\r\nexport function listRoomUsers (room) {\r\n  return request.post('./index.php', {\r\n    function: 'listRoomUsers',\r\n    room\r\n  })\r\n}\n","<template>\r\n    <div>\r\n        <!-- <div>\r\n            <div>\r\n                <span>选择麦克风</span>\r\n                <el-select v-model=\"audioDevice\" style=\"margin-left:10px\">\r\n                    <el-option v-for=\"(item,index) in audioDevices\" :key=\"index\" :label=\"item.label\" :value=\"item.deviceId\"></el-option>\r\n                </el-select>\r\n            </div>\r\n            <div>\r\n                <span>选择摄像头</span>\r\n                <el-select v-model=\"videoDevice\" style=\"margin-left:10px\">\r\n                    <el-option v-for=\"(item,index) in videoDevices\" :key=\"index\" :label=\"item.label\" :value=\"item.deviceId\"></el-option>\r\n                </el-select>\r\n            </div>\r\n        </div> -->\r\n        <div style=\"margin-top:20px\">\r\n            <!-- <el-button type=\"primary\" @click=\"showInfo=true\">生成roomToken</el-button> -->\r\n            <!-- <p>活跃房间列表</p>\r\n            <el-table :data=\"room_list\" border>\r\n                <el-table-column label=\"房间名\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{scope.row}}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column>\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" @click=\"chooseRoom(scope.row)\">选择</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table> -->\r\n            <el-dialog :visible.sync=\"showInfo\" title=\"Info\">\r\n                \r\n                <p>Please enter your name</p><el-input v-model=\"userId\"></el-input>\r\n              \r\n                <div>\r\n                  <el-button type=\"primary\" style=\"margin-top:20px\" @click=\"joinRoom\">Join Room</el-button>\r\n                </div>\r\n            </el-dialog>\r\n            <!-- <el-dialog :visible.sync=\"showToken\">\r\n                <p>userToken：</p>\r\n                <p>{{userToken}}</p>\r\n            </el-dialog> -->\r\n\r\n            <!-- <div style=\"margin-top:50px;margin-bottom:50px\">\r\n                <el-select v-model=\"currentUser\" @focus=\"listRoomUsers\">\r\n                    <el-option v-for=\"(item,index) in userList\" :key=\"index\" :value=\"item.userId\" :label=\"item.userId\"></el-option>\r\n                </el-select>\r\n                <el-button @click=\"changeView\" type=\"primary\">选择用户推流</el-button>\r\n                <el-button @click=\"stopView\">停止推流</el-button>\r\n            </div> -->\r\n\r\n        </div>\r\n\r\n        <!-- <label>请输入 RoomToken 加入房间开始连麦</label>\r\n        <el-input v-model=\"roomToken\" type=\"text\"></el-input> -->\r\n        <el-button type=\"primary\" @click=\"showInfo=true\">Join Room</el-button>\r\n        <el-dropdown trigger=\"click\" @visible-change=\"listRoomUsers\" style=\"margin-left:10px\" placement=\"bottom-start\">\r\n          <el-badge :value=\"newMessages.length\" class=\"item\" :hidden=\"newMessages.length==0\">\r\n            <el-button type=\"primary\">\r\n              Chat<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n            </el-button>\r\n          </el-badge>\r\n          <el-dropdown-menu slot=\"dropdown\">\r\n            <el-dropdown-item v-for=\"(item,index) in userList\" :key=\"index\">\r\n              <el-badge :value=\"computeNum(item.userId)\" class=\"item\" :hidden=\"computeHidden(item.userId)\">\r\n                <div style=\"width:80px;height:50px;line-height:50px\" @click=\"initChat(item.userId)\">{{item.userId}}</div>\r\n              </el-badge>\r\n            </el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </el-dropdown>\r\n        <el-button @click=\"showSend=true\" type=\"primary\" v-if=\"userId=='admin'\" style=\"margin-left:20px\">Post</el-button>\r\n\r\n        <el-dialog :visible.sync=\"showChat\" @close=\"removeMessage\">\r\n          <div class=\"chatBlock\">\r\n            <div v-for=\"(item,index) in chatMessage\" :key=\"index\" style=\"height:50px;line-height:50px;margin-top:10px\">\r\n              <div :class=\"(item.userId==userId?'right':'left')\">\r\n                <span style=\"background:rgba(64,158,255,0.3);border-radius:20px;padding:10px 16px;\">{{item.data}}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style=\"margin-top:20px\">\r\n            <el-input v-model=\"message\" style=\"width:86%\"></el-input>\r\n            <el-button type=\"primary\" @click=\"sendMessage\" style=\"margin-left:10px\">Send</el-button>\r\n          </div>\r\n        </el-dialog>\r\n\r\n        <div class=\"users\">\r\n            <p style=\"color:#606266\">Local</p>\r\n            <div id=\"localvideo\" style=\"width:320px\"></div>\r\n            <p style=\"margin-top:30px;color:#606266\" v-if=\"userId=='admin'\">Meeting</p>\r\n            <div id=\"remote\">\r\n              <!-- <div id=\"mobile\" style=\"width:50%\"></div>\r\n              <div id=\"ppt\" style=\"width:50%\"></div> -->\r\n            </div>\r\n        </div>\r\n        <el-dialog :visible.sync=\"showSend\" title=\"Send\">\r\n          <el-input v-model=\"messageAll\"></el-input>\r\n          <el-button @click=\"sendAll\">Send</el-button>\r\n        </el-dialog>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as QNRTC from 'pili-rtc-web'\r\nimport { listActiveRooms, createRoomToken, listRoomUsers } from '../api/demo'\r\nconst myRoom = new QNRTC.StreamModeSession()\r\n\r\nconsole.log('current version is', QNRTC.version)\r\nexport default {\r\n  data () {\r\n    return {\r\n      audioDevice: '',\r\n      videoDevice: '',\r\n      audioDevices: [],\r\n      videoDevices: [],\r\n      roomToken: '',\r\n      userList: [],\r\n      currentUser: '',\r\n      lastUser: '',\r\n      showInfo: false,\r\n      showToken: false,\r\n      showSend:false,\r\n      room: '',\r\n      userId: '',\r\n      userToken: '',\r\n      room_list: [],\r\n      type: '',\r\n      currentRoom: '',\r\n      message:'',\r\n      toUserId:'',\r\n      showChat:false,\r\n      chatMessage:[],\r\n      allMessages:{},\r\n      newMessages:[],\r\n      messageAll:''\r\n    }\r\n  },\r\n  mounted () {\r\n    this.listActiveRooms()  \r\n    if (QNRTC.deviceManager.deviceInfo) {\r\n      this.addDeviceToSelect(QNRTC.deviceManager.deviceInfo)\r\n    }\r\n    QNRTC.deviceManager.on('device-update', deviceInfo => {\r\n      this.addDeviceToSelect(deviceInfo)\r\n    })\r\n  },\r\n  methods: {\r\n    addDeviceToSelect (deviceInfo) {\r\n      let audioDevices = []\r\n      let videoDevices = []\r\n      deviceInfo.forEach(info => {\r\n        if (info.kind === 'audioinput') {\r\n          audioDevices.push(info)\r\n        } else if (info.kind === 'videoinput') {\r\n          videoDevices.push(info)\r\n        }\r\n      })\r\n      this.audioDevices = audioDevices\r\n      this.videoDevices = videoDevices\r\n    },\r\n    async joinRoom () {\r\n      // 从输入框中获取 roomToken\r\n\r\n      this.showInfo=false\r\n\r\n      const roomToken = await this.createRoomToken()\r\n\r\n      try {\r\n        // 加入房间\r\n        const users = await myRoom.joinRoomWithToken(roomToken)\r\n\r\n        // 如果加入房间后发现房间已经有人发布，就订阅他\r\n        if(this.userId=='admin'){\r\n          for (const user of users) {\r\n            if (user.userId !== myRoom.userId && user.published) {\r\n              // if(user.userId=='mobile'){\r\n              //   this.subscribeUser(user.userId,'mobile')\r\n              // }else if(user.userId=='ppt'){\r\n              //   this.subscribeUser(user.userId,'ppt')\r\n              // }else{\r\n              //   let div = document.createElement('div');\r\n              //   div.setAttribute('id',user.userId);\r\n              //   div.style.width = '320px';\r\n              \r\n              //   let remote = document.getElementById('remote')\r\n              //   remote.appendChild(div)\r\n              //   this.subscribeUser(user.userId,user.userId)\r\n              // }\r\n              let div = document.createElement('div');\r\n              let div1 = document.createElement('div');\r\n              let div2 = document.createElement('div');\r\n              div.appendChild(div1)\r\n              div.appendChild(div2)\r\n              div2.style.height='50px';\r\n              div2.style.color='#606266'\r\n              div2.style.textAlign='center'\r\n              div2.innerHTML=user.userId\r\n              div1.setAttribute('id',user.userId);\r\n              div1.style.width = '320px';\r\n              let remote = document.getElementById('remote')\r\n              remote.appendChild(div)\r\n              \r\n\r\n              this.subscribeUser(user.userId,user.userId)\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert(`Join Failed！ErrorCode: ${e.code || ''}`)\r\n        return\r\n      }\r\n\r\n      // 监听房间中其他人发布的事件，自动订阅他\r\n      myRoom.on('user-publish', (user) => {\r\n            // if(user.userId=='mobile'){\r\n            //   this.subscribeUser(user.userId,'mobile')\r\n            // }else if(user.userId=='ppt'){\r\n            //   this.subscribeUser(user.userId,'ppt')\r\n            // }else{\r\n            //   let div = document.createElement('div');\r\n            //   div.setAttribute('id',user.userId);\r\n            //   div.style.width = '320px';\r\n            //   let remote = document.getElementById('remote')\r\n            //   remote.appendChild(div)\r\n\r\n            //   this.subscribeUser(user.userId,user.userId)\r\n            // }\r\n            if(this.userId=='admin'){\r\n              let div = document.createElement('div');\r\n              let div1 = document.createElement('div');\r\n              let div2 = document.createElement('div');\r\n              div.appendChild(div1)\r\n              div.appendChild(div2)\r\n              div2.style.height='50px';\r\n              div2.innerHTML=user.userId\r\n               div2.style.textAlign='center'\r\n              div2.style.color='#606266'\r\n              div1.setAttribute('id',user.userId);\r\n              div1.style.width = '320px';\r\n              let remote = document.getElementById('remote')\r\n              remote.appendChild(div)\r\n              \r\n\r\n              this.subscribeUser(user.userId,user.userId)\r\n            }\r\n       \r\n      })\r\n\r\n      myRoom.on(\"messages-received\", data=> {\r\n        \r\n       \r\n        if(this.allMessages[data[0].userId]!==undefined){\r\n          let box = this.allMessages[data[0].userId]\r\n          box.push(data[0])\r\n          this.allMessages[data[0].userId] = box\r\n        }else{\r\n          this.allMessages[data[0].userId]=[]\r\n          let box = this.allMessages[data[0].userId]\r\n          box.push(data[0])\r\n          this.allMessages[data[0].userId] = box\r\n\r\n        }\r\n        this.updateMessage()\r\n        if((data[0].userId==this.toUserId) && this.showChat==true){\r\n\r\n        }else{\r\n          let box = this.newMessages\r\n          box.push(data[0])\r\n          this.newMessages = box\r\n        }\r\n      })\r\n\r\n      myRoom.on(\"user-join\",(user)=>{\r\n        this.$message({\r\n          message:user.userId+'comming~',\r\n          type:'success'\r\n        })\r\n      });\r\n\r\n      // 自动发布\r\n      await this.publish(myRoom)\r\n\r\n    },\r\n    updateMessage(){\r\n      this.chatMessage = this.allMessages[this.toUserId]\r\n    },\r\n\r\n    async publishScreen () {\r\n      let stream\r\n      try {\r\n        // 通过用户在页面上指定的设备发起采集\r\n        // 也可以不指定设备，这样会由浏览器自动选择\r\n        stream = await QNRTC.deviceManager.getLocalStream({\r\n          screen: {\r\n              enabled: true,\r\n              source: \"window\",\r\n              bitrate: 600,\r\n              height: 1080,\r\n              width: 1920,\r\n          },\r\n          audio: {\r\n              enabled: false,\r\n          }\r\n        })\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert(`Please check your device。ErrorCode: ${e.code}`)\r\n        return\r\n      }\r\n\r\n      // 将采集到的流静音播放\r\n      const localVideo = document.getElementById('localvideo')\r\n      stream.play(localVideo, true)\r\n\r\n      try {\r\n        // 发布采集流\r\n        await myRoom.publish(stream)\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert(`Fail，ErrorCode: ${e.code}`)\r\n      }\r\n    },\r\n    async publish () {\r\n      let stream\r\n      try {\r\n        // 通过用户在页面上指定的设备发起采集\r\n        // 也可以不指定设备，这样会由浏览器自动选择\r\n        stream = await QNRTC.deviceManager.getLocalStream({\r\n          video: {\r\n            enabled: true,\r\n            deviceId: this.videoDevice,\r\n            bitrate: 1000,\r\n            height:480,\r\n            width:640\r\n          },\r\n          audio: {\r\n            enabled: false,\r\n            deviceId: this.audioDevice\r\n          }\r\n        })\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert(`Please check your device。ErrorCode: ${e.code}`)\r\n        return\r\n      }\r\n\r\n      // 将采集到的流静音播放\r\n      const localVideo = document.getElementById('localvideo')\r\n      stream.play(localVideo, true)\r\n\r\n      try {\r\n        // 发布采集流\r\n        await myRoom.publish(stream)\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert(`Fail，ErrorCode: ${e.code}`)\r\n      }\r\n    },\r\n    subscribeUser (userId,position) {\r\n      const remoteContainer = document.getElementById(position)\r\n      // 订阅目标用户\r\n      myRoom.subscribe(userId).then(stream => {\r\n        stream.play(remoteContainer)\r\n      })\r\n    },\r\n    listActiveRooms () {\r\n      listActiveRooms().then(res => {\r\n        this.room_list = res.data.rooms\r\n      })\r\n    },\r\n    createRoomToken () {\r\n      return new Promise((resolve,reject)=>{\r\n        this.room = 'test'\r\n        createRoomToken(this.room,this.userId, 'user').then(res => {\r\n          resolve(res.data.data)\r\n        })\r\n      })\r\n      \r\n    },\r\n    listRoomUsers (e) {\r\n      if(e){\r\n        if(this.room!==''){\r\n          listRoomUsers('test').then(res => {\r\n            if(this.userId!=='admin'){\r\n              let list = res.data.users.filter(item=>{\r\n                return item.userId=='admin'\r\n              })\r\n              this.userList = list\r\n            }else{\r\n              let list = res.data.users.filter(item=>{\r\n                return item.userId!=='admin'\r\n              })\r\n              this.userList = list\r\n            }\r\n          })\r\n        }\r\n      }\r\n    },\r\n    changeView () {\r\n      for (let item of this.userList) {\r\n        if (item.userId == this.currentUser) {\r\n          myRoom.setMergeStreamLayout(this.currentUser, {\r\n            x: 0, y: 0, w: 1920, h: 1080, hidden: false, muted: false\r\n          })\r\n        } else {\r\n           myRoom.setMergeStreamLayout(item.userId, {\r\n            x: 0, y: 0, w: 0, h: 0, hidden: false, muted: false\r\n          })\r\n        }\r\n      }\r\n    },\r\n    stopView(){\r\n      myRoom.stopMergeStream();\r\n    },\r\n    initChat(userId){\r\n      this.toUserId = userId\r\n      this.message = ''\r\n      this.showChat = true\r\n      console.log(this.allMessages)\r\n      if(this.allMessages[userId]){\r\n        this.chatMessage=this.allMessages[userId]\r\n      }else{\r\n        this.chatMessage = []\r\n      }\r\n      let box = this.newMessages.filter(item=>{\r\n        return item.userId!==this.toUserId\r\n      })\r\n      this.newMessages=box\r\n    },\r\n    sendMessage(){\r\n      myRoom.sendCustomMessage(this.message,[this.toUserId]);\r\n      let data={\r\n        data:this.message,\r\n        type:'normal',\r\n        userId:this.userId\r\n      }\r\n       if(this.allMessages[this.toUserId]){\r\n         let box = this.allMessages[this.toUserId]\r\n          box.push(data)\r\n          this.allMessages[this.toUserId] = box\r\n        }else{\r\n          this.allMessages[this.toUserId]=[]\r\n          let box = this.allMessages[this.toUserId]\r\n          box.push(data)\r\n          this.allMessages[this.toUserId] = box\r\n        }\r\n        this.updateMessage()\r\n    },\r\n    removeMessage(){\r\n      this.chatMessage=[]\r\n    },\r\n    computeNum(userId){\r\n      let array = []\r\n      array = this.newMessages.filter(item=>{\r\n        return item.userId==userId\r\n      })\r\n      return array.length\r\n    },\r\n    computeHidden(userId){\r\n      let array = []\r\n      array = this.newMessages.filter(item=>{\r\n        return item.userId==userId\r\n      })\r\n      if(array.length==0){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    },\r\n    sendAll(){\r\n      myRoom.sendCustomMessage(this.messageAll);\r\n      this.showSend=false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\nselect {\r\n  width: 300px;\r\n}\r\n\r\nsection {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.qnrtc-stream-player {\r\n  width: 100% !important;\r\n  /* height: 1080px !important; */\r\n  background: #000;\r\n}\r\n#remote{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.chatBlock{\r\n  width: 100%;\r\n  height: 400px;\r\n  overflow-y: scroll;\r\n}\r\n.right{\r\n  text-align: right;\r\n}\r\n.left{\r\n  text-align: left;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./demo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./demo.vue?vue&type=template&id=75a99d13&\"\nimport script from \"./demo.vue?vue&type=script&lang=js&\"\nexport * from \"./demo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./demo.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Demo from '../pages/demo.vue'\r\n\r\nVue.use(Router)\r\nconst originalPush = Router.prototype.push\r\nRouter.prototype.push = function push (location) {\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\nconst router = new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      component: Demo\r\n    }\r\n  ]\r\n})\r\n// router.beforeEach((to, from, next) => {\r\n//   if (to.path === '/login') {\r\n//     next()\r\n//   } else {\r\n//     var userId = getUserId()\r\n//     console.log('userId:' + userId)\r\n//     if (to.meta.requiresAuth && !userId) {\r\n//       next({\r\n//         path: '/login'\r\n//       })\r\n//     } else {\r\n//       next()\r\n//     }\r\n//   }\r\n// })\r\nexport default router\r\n","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nimport createPersistedState from 'vuex-persistedstate'\r\n\r\nVue.use(Vuex)\r\n\r\nconst store = new Vuex.Store({\r\n  state: {\r\n\r\n  },\r\n  mutations: {\r\n\r\n  },\r\n\r\n  plugins: [createPersistedState()]\r\n})\r\n\r\nexport default store\r\n","import Vue from 'vue'\r\nimport ElementUI from 'element-ui'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport 'normalize.css'\r\nimport store from './store'\r\n\r\nVue.config.productionTip = false\r\n\r\nVue.use(ElementUI)\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n"],"sourceRoot":""}